{"ast":null,"code":"import _classCallCheck from\"/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";//HistoryTickets\nimport React from\"react\";import HistoryTicket from'./HistoryTicket';import\"../Ticket/Tickets.css\";import{getAllTicket,deleteTicket}from\"../api\";var HistoryTickets=/*#__PURE__*/function(_React$Component){_inherits(HistoryTickets,_React$Component);function HistoryTickets(props){var _this;_classCallCheck(this,HistoryTickets);_this=_possibleConstructorReturn(this,_getPrototypeOf(HistoryTickets).call(this,props));_this.deleteOneTicket=function(id){deleteTicket(id).then(function(res){var newList=_this.state.Tickets.filter(function(Ticket){return Ticket._id!==id;});_this.setState({history:newList});}).catch(function(err){});};_this.state={history:null};return _this;}_createClass(HistoryTickets,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Mack API call to det all the Ticket of closed state \ngetAllTicket().then(function(reponse){console.log(\"reponse.data\",reponse.data);var history=reponse.data.filter(function(Ticket){if(Ticket.TicketState===\"closed\"){return reponse.data;}});_this2.setState({history:history});}).catch(function(error){console.log(\" API error: \",error);});}},{key:\"render\",value:function render(){var _this3=this;var History=React.createElement(\"h3\",null,\" No History Tickets.. \");if(this.state.history!==null){History=this.state.history.map(function(Tickets,index){return React.createElement(HistoryTicket,{id:Tickets._id,TicketType:Tickets.TicketType,TicketState:Tickets.TicketState,deleteOneTicket:_this3.deleteOneTicket,TicketDescription:Tickets.TicketDescription,key:index});});}return React.createElement(\"div\",{className:\"content\"},React.createElement(\"h2\",null,\"History Ticket\"),React.createElement(\"ul\",{className:\"timeline\"},History),React.createElement(\"button\",{onClick:this.props.toggle},\" Go back \"));}}]);return HistoryTickets;}(React.Component);export{HistoryTickets as default};","map":{"version":3,"sources":["/Users/mac/sei/projects/Project3_Team_011_Enjaz/enjaz-front-end/src/components/HistoryTickets/HistoryTickets.js"],"names":["React","HistoryTicket","getAllTicket","deleteTicket","HistoryTickets","props","deleteOneTicket","id","then","res","newList","state","Tickets","filter","Ticket","_id","setState","history","catch","err","reponse","console","log","data","TicketState","error","History","map","index","TicketType","TicketDescription","toggle","Component"],"mappings":"45BAAA;AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAO,uBAAP,CACA,OAASC,YAAT,CAAwBC,YAAxB,KAA4C,QAA5C,C,GAEqBC,CAAAA,c,oFAEjB,wBAAYC,KAAZ,CAAmB,gDACf,gFAAMA,KAAN,GADe,MAwBnBC,eAxBmB,CAwBD,SAACC,EAAD,CAAQ,CACtBJ,YAAY,CAACI,EAAD,CAAZ,CACKC,IADL,CACU,SAACC,GAAD,CAAS,CACX,GAAMC,CAAAA,OAAO,CAAG,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,MAAnB,CAA0B,SAACC,MAAD,CAAY,CAClD,MAAOA,CAAAA,MAAM,CAACC,GAAP,GAAeR,EAAtB,CACH,CAFe,CAAhB,CAGA,MAAKS,QAAL,CAAc,CAAEC,OAAO,CAAEP,OAAX,CAAd,EACH,CANL,EAOKQ,KAPL,CAOW,SAACC,GAAD,CAAS,CACf,CARL,EASH,CAlCkB,CAEf,MAAKR,KAAL,CAAa,CACTM,OAAO,CAAE,IADA,CAAb,CAFe,aAKlB,C,wFAGmB,iBAChB;AACAf,YAAY,GACPM,IADL,CACU,SAAAY,OAAO,CAAI,CACbC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BF,OAAO,CAACG,IAApC,EACA,GAAMN,CAAAA,OAAO,CAAGG,OAAO,CAACG,IAAR,CAAaV,MAAb,CAAoB,SAAAC,MAAM,CAAI,CAC1C,GAAIA,MAAM,CAACU,WAAP,GAAuB,QAA3B,CAAqC,CACjC,MAAOJ,CAAAA,OAAO,CAACG,IAAf,CACH,CACJ,CAJe,CAAhB,CAKA,MAAI,CAACP,QAAL,CAAc,CAAEC,OAAO,CAAPA,OAAF,CAAd,EACH,CATL,EAUKC,KAVL,CAUW,SAAAO,KAAK,CAAI,CACZJ,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BG,KAA5B,EACH,CAZL,EAaH,C,uCAaO,iBACJ,GAAIC,CAAAA,OAAO,CAAG,uDAAd,CACA,GAAG,KAAKf,KAAL,CAAWM,OAAX,GAAuB,IAA1B,CAAgC,CAC5BS,OAAO,CAAE,KAAKf,KAAL,CAAWM,OAAX,CAAmBU,GAAnB,CAAwB,SAACf,OAAD,CAAWgB,KAAX,CAAoB,CACrD,MACA,qBAAC,aAAD,EACA,EAAE,CAAEhB,OAAO,CAACG,GADZ,CAEA,UAAU,CAAEH,OAAO,CAACiB,UAFpB,CAGA,WAAW,CAAEjB,OAAO,CAACY,WAHrB,CAIA,eAAe,CAAE,MAAI,CAAClB,eAJtB,CAKA,iBAAiB,CAAEM,OAAO,CAACkB,iBAL3B,CAMA,GAAG,CAAEF,KANL,EADA,CASH,CAVY,CAAT,CAUD,CACL,MACI,4BAAK,SAAS,CAAC,SAAf,EACI,+CADJ,CAEI,0BAAI,SAAS,CAAC,UAAd,EACCF,OADD,CAFJ,CAKA,8BAAQ,OAAO,CAAE,KAAKrB,KAAL,CAAW0B,MAA5B,cALA,CADJ,CAQD,C,4BA5DuC/B,KAAK,CAACgC,S,SAA7B5B,c","sourcesContent":["//HistoryTickets\nimport React from \"react\";\nimport HistoryTicket from './HistoryTicket'\nimport \"../Ticket/Tickets.css\";\nimport { getAllTicket , deleteTicket } from \"../api\";\n\nexport default class HistoryTickets extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            history: null,\n        };\n    }\n\n\n    componentDidMount() {\n        // Mack API call to det all the Ticket of closed state \n        getAllTicket()\n            .then(reponse => {\n                console.log(\"reponse.data\", reponse.data);\n                const history = reponse.data.filter(Ticket => {\n                    if (Ticket.TicketState === \"closed\") {\n                        return reponse.data;\n                    }\n                });\n                this.setState({ history });\n            })\n            .catch(error => {\n                console.log(\" API error: \", error);\n            });\n    }\n    deleteOneTicket = (id) => {\n        deleteTicket(id)\n            .then((res) => {\n                const newList = this.state.Tickets.filter((Ticket) => {\n                    return Ticket._id !== id;\n                });\n                this.setState({ history: newList });\n            })\n            .catch((err) => {\n            })\n    }\n\n    render(){\n        let History = <h3> No History Tickets.. </h3>\n        if(this.state.history !== null ){\n            History= this.state.history.map( (Tickets , index)=> {\n            return(\n            <HistoryTicket \n            id={Tickets._id}\n            TicketType={Tickets.TicketType}\n            TicketState={Tickets.TicketState}\n            deleteOneTicket={this.deleteOneTicket}\n            TicketDescription={Tickets.TicketDescription}\n            key={index} /> \n            );\n        })}\n      return(\n          <div className=\"content\">\n              <h2>History Ticket</h2>\n              <ul className=\"timeline\">\n              {History}\n          </ul>\n          <button onClick={this.props.toggle} > Go back </button>\n          </div>);\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}